# Шаблон-инструкция для ИИ по управлению файлами в memory-bank/

Эта инструкция предназначена для ИИ, который автоматически создает и обновляет файлы в папке `memory-bank/`. Она обеспечивает консистентность структуры, форматирования и содержания файлов типов: `activeContext.md`, `decisionLog.md`, `productContext.md`, `progress.md`, `systemPatterns.md`.

## 1. Общие паттерны

- **Язык**: Все файлы на русском языке.
- **Формат временной метки**: `ГГГГ-ММ-ДД ЧЧ:ММ:СС` (UTC, например: `2025-10-11 12:33:03`).
- **Формат записей**: Каждая запись в разделах начинается с `[временная метка] - [описание]`.
- **Сортировка записей**: Обратный хронологический порядок (новые записи сверху, старые внизу).
- **Сортировка разделов**: В файлах с указанным порядком разделов следовать указанной последовательности по важности.
- **Обновление меток**: При изменении файла обновлять метку "Последняя редакция" с текущей временной меткой.
- **Формат файла**: Markdown (.md).

## 2. Правила создания новых файлов

При создании нового файла следовать общей структуре: заголовок, описание, правила редактирования, стандартные разделы. Инициализировать с текущей временной меткой.

### activeContext.md
Отслеживает текущий статус проекта, недавние изменения и открытые вопросы.
- **Структура**:
  ```
  # Active Context

  Этот файл отслеживает текущий статус проекта, включая недавние изменения, текущие цели и открытые вопросы.
  [текущая метка] - Последняя редакция базового описания.

  ## Правила редактирования

  * Записи в разделах должны быть отсортированы в обратном хронологическом порядке (самые новые сверху, старые внизу).
  * Каждая запись должна начинаться с даты редакции в формате ГГГГ-ММ-ДД ЧЧ:ММ:СС.
  [текущая метка] - Последняя редакция правил редактирования.

  ## Текущий фокус

  ## Недавние изменения

  ## Уточненная информация о среде выполнения

  ## Открытые вопросы/проблемы
  ```

### decisionLog.md
Записывает архитектурные и реализационные решения.
- **Структура**:
  ```
  # Decision Log

  Этот файл записывает архитектурные и реализационные решения в формате списка.
  [текущая метка] - Последняя редакция базового описания.

  ## Правила редактирования

  * Записи в разделах должны быть отсортированы в обратном хронологическом порядке (самые новые сверху, старые внизу).
  * Каждая запись должна начинаться с даты редакции в формате ГГГГ-ММ-ДД ЧЧ:ММ:СС.
  [текущая метка] - Последняя редакция правил редактирования.

  ## Записи MCP

  ## Решение: [Название решения]
  ### Обоснование
  ### Детали реализации
  ```

### productContext.md
Предоставляет общий обзор проекта и продукта.
- **Структура**:
  ```
  # Product Context

  Этот файл предоставляет общий обзор проекта и ожидаемого продукта. Он основан на информации из файлов проекта в рабочей директории.
  [текущая метка] - Последняя редакция базового описания.

  ## Правила редактирования

  * Обновлять, когда значительно изменяется высокоуровневое описание проекта, цели, функции или общая архитектура.
  * Временная метка и краткое описание изменения должны быть добавлены в виде сносок в конец файла.
  * Записи в разделах должны быть отсортированы в обратном хронологическом порядке (самые новые сверху, старые внизу).
  * Разделы должны быть отсортированы по важности: Проектная цель, Ключевые особенности, Общая архитектура, Архитектурные решения для кросс-платформенности.
  [текущая метка] - Последняя редакция правил редактирования.

  ## Проектная цель

  ## Ключевые особенности

  ## Общая архитектура

  ## Архитектурные решения для кросс-платформенности
  ```

### progress.md
Отслеживает прогресс проекта в формате списка задач.
- **Структура**:
  ```
  # Progress

  Этот файл отслеживает прогресс проекта в формате списка задач.
  [текущая метка] - Последняя редакция базового описания.

  ## Правила редактирования

  * Обновлять, когда задача начинается, завершается или происходят изменения в статусе задачи.
  * Всегда включать временную метку в формате [ГГГГ-ММ-ДД ЧЧ:ММ:СС] - [Краткое описание изменения].
  * Записи в разделах должны быть отсортированы в обратном хронологическом порядке (самые новые сверху, старые внизу).
  * Разделы должны быть отсортированы по важности: Выполненные задачи, Текущие задачи, Следующие шаги, Последние обновления.
  [текущая метка] - Последняя редакция правил редактирования.

  ## Выполненные задачи

  ## Текущие задачи

  ## Следующие шаги

  ## Последние обновления
  ```

### systemPatterns.md
Документирует повторяющиеся паттерны и стандарты.
- **Структура**:
  ```
  # System Patterns

  Этот файл документирует повторяющиеся паттерны и стандарты, используемые в проекте.
  [текущая метка] - Последняя редакция базового описания.

  ## Правила редактирования

  * Обновлять, когда вводятся новые архитектурные паттерны или изменяются существующие.
  * Всегда включать временную метку в формате [ГГГГ-ММ-ДД ЧЧ:ММ:СС] - [Описание паттерна/изменения].
  * Записи в разделах должны быть отсортированы в обратном хронологическом порядке (самые новые сверху, старые внизу).
  * Разделы должны быть отсортированы по важности: Паттерны кодирования, Архитектурные паттерны, Паттерны тестирования.
  [текущая метка] - Последняя редакция правил редактирования.

  ## Паттерны кодирования

  ## Архитектурные паттерны

  ## Паттерны тестирования
  ```

## 3. Правила редактирования существующих файлов

- **Общие правила**:
  - Добавлять новые записи в начало соответствующих разделов (сохраняя обратный хронологический порядок).
  - Использовать текущую временную метку для новых записей.
  - Не удалять существующие записи без явной необходимости (например, при устаревании информации).
  - Обновлять метку "Последняя редакция" в описании и правилах при изменениях.
  - Сохранять структуру разделов и их порядок.

- **Специфические правила**:
  - **activeContext.md**: Добавлять новые фокусы, изменения, вопросы в соответствующие разделы. Обновлять информацию о среде при изменениях.
  - **decisionLog.md**: Структурировать новые решения с заголовками "## Решение: [Название]", подразделами "### Обоснование" и "### Детали реализации".
  - **productContext.md**: Обновлять только при значительных изменениях проекта. Добавлять метки изменений в конец файла.
  - **progress.md**: Перемещать задачи между разделами (Выполненные, Текущие, Следующие) по мере прогресса. Не перезаписывать существующие записи.
  - **systemPatterns.md**: Добавлять новые паттерны в соответствующие разделы, обновлять существующие при изменениях в проекте.

## 4. Примеры правильного форматирования

### activeContext.md
```
## Текущий фокус

2025-10-11 12:33:03 - Определение дальнейших шагов по развитию проекта
2025-03-29 16:02:00 - Инициализация Memory Bank для проекта системного администрирования
```

### decisionLog.md
```
## Решение: Синхронизация Git и окончания строк
2025-03-29 16:02:00 - Решение: Синхронизация Git и окончания строк
### Обоснование
* Устранение проблем с окончаниями строк (CRLF/LF) при совместной работе на Windows и Linux.
### Детали реализации
* **Глобальная конфигурация Git:** `git config --global core.autocrlf input` для Linux/macOS.
```

### productContext.md
```
## Проектная цель
2025-03-29 16:02:00 - Проектная цель
* Создание комплексного набора инструментов и руководств для системных администраторов
```

### progress.md
```
## Выполненные задачи
2025-10-11 12:12:07 - Предложены решения для управления OS-зависимыми конфигурациями.
2025-03-29 16:02:00 - Инициализация Memory Bank для отслеживания контекста проекта
```

### systemPatterns.md
```
## Паттерны кодирования
2025-03-29 16:02:00 - Паттерны кодирования
* **Структура скриптов автоматизации**:
  * Начало с описания и комментариев о назначении скрипта
```

## 5. Общие рекомендации по поддержанию актуальности и консистентности

- **Актуальность**: Обновлять файлы сразу после значимых событий в проекте (завершение задач, принятие решений, изменения архитектуры). Проверять актуальность информации ежемесячно или при milestone.
- **Консистентность**: Использовать единый формат временных меток (UTC), язык (русский), стиль Markdown. Поддерживать порядок сортировки и структуру разделов.
- **Автоматизация**: При автоматическом обновлении всегда генерировать текущую временную метку. Избегать дублирования записей.
- **Валидация**: После обновления проверять, что файл соответствует правилам (сортировка, формат). При обнаружении ошибок исправлять немедленно.
- **Документация изменений**: Для каждого обновления добавлять краткое описание в соответствующей записи или метке "Последняя редакция".

Эта инструкция обеспечивает единообразие и эффективность управления memory-bank/. Следуйте ей строго для поддержания качества документации.